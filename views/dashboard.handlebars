<section class="section">
    <div class="container">
        <h1 class="title">Welcome to Your Dashboard, {{username}}!</h1>
        <div class="columns">
            <div class="column is-one-quarter">
                <div class="box">
                    <figure class="image is-128x128 mb-4">
                        <img src="https://api.dicebear.com/6.x/adventurer/svg?seed={{username}}" alt="{{username}}'s avatar" class="is-rounded">
                    </figure>
                    <p class="title is-5">{{username}}</p>
                    <p class="subtitle is-6">{{email}}</p>
                    <p>Member since: {{memberSince}}</p>
                </div>
                <div class="box">
                    <h2 class="title is-4">Your Stats</h2>
                    <p>Total Items: {{totalItems}}</p>
                    <p>Last Login: {{lastLogin}}</p>
                </div>
            </div>
            <div class="column">
                <div class="box">
                    <h2 class="title is-4">Your Items</h2>
                    {{#if items}}
                        <ul>
                            {{#each items}}
                                <li>{{this.name}} - {{this.description}}</li>
                            {{/each}}
                        </ul>
                    {{else}}
                        <p>You haven't added any items yet.</p>
                    {{/if}}
                </div>
                <div class="box">
                    <h2 class="title is-4">Add New Item</h2>
                    <form id="stock-form" action="api/stock" method="POST">
                        <div class="field">
                            <label class="label" for="add-items">Add Items:</label>
                            <div class="control">
                                <input class="input" type="text" placeholder="Enter Item" name="item-name" />
                            </div>
                        </div>
                        <div class="field">
                            <label class="label">Select Icon</label>
                            <div class="control">
                                <div class="select">
                                    <select name="icon">
                                        <option value="">Select an icon</option>
                                        <option value="apple">üçé Apple</option>
                                        <option value="carrot">ü•ï Carrot</option>
                                        <option value="pepper">üå∂Ô∏è Pepper</option>
                                        <option value="fish">üêü Fish</option>
                                        <option value="cheese">üßÄ Cheese</option>
                                        <option value="egg">ü•ö Egg</option>
                                        <option value="bread">üçû Bread</option>
                                        <option value="bacon">ü•ì Bacon</option>
                                        <option value="pizza">üçï Pizza</option>
                                        <option value="seedling">üå± Seedling</option>
                                        <option value="cookie">üç™ Cookie</option>
                                        <option value="rice">üçö Rice</option>
                                        <option value="bottle">üç∂ Bottle</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="field">
                            <label class="label" for="expiration-date">Expiration Date:</label>
                            <div class="control">
                                <input class="input" type="date" id="expiration-date" name="expiration-date"/>
                            </div>
                        </div>
                        <div class="field is-grouped">
                            <div class="control">
                                <button type="submit" class="button is-primary">Submit</button>
                            </div>
                            <div class="control">
                                <button type="button" class="button is-link is-light add-input">Add More</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', (event) => {
    const addButton = document.querySelector('.add-input');
    const form = document.getElementById('stock-form');

    addButton.addEventListener('click', () => {
        const newItemField = form.querySelector('.field').cloneNode(true);
        newItemField.querySelector('input').value = '';
        form.insertBefore(newItemField, addButton.parentNode.parentNode);
    });
});
</script>